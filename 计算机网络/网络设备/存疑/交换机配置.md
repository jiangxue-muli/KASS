# 交换机配置



## 壹-基础配置

###### 一，通用命令

| 命令      | 描述         |
| --------- | ------------ |
| exit      | 返回上一级   |
| disable   | 退出特权模式 |
| end       | 返回特权模式 |
|           |              |
| show 文件 | 查看文件     |

 

###### 二，模式命令

| 命令      | 描述             |
| --------- | ---------------- |
| enable    | 进入特权用户     |
| configure | 进入全局配置模式 |



###### 三，接口配置

| 命令           | 描述         |
| -------------- | ------------ |
| interface f0/1 | 进入接口模式 |



###### 四，VLAN

| 命令    | 描述             |
| ------- | ---------------- |
| vlan 10 | 进入VLAN配置模式 |



###### 五，修改交换机名称

| 命令               | 描述                  |
| ------------------ | --------------------- |
| configrue termina1 | 进入交换机            |
| hostname Name1     | 修改交换机名称为Name1 |



###### 六，设置交换机端口参数

| 命令                       | 描述                 |
| -------------------------- | -------------------- |
| interface fastEthernet 0/1 | 进入端口             |
| speed 100                  | 配置端口速率为100    |
| duplex half                | 设置端口为半双工模式 |
| no shutdown                | 开启端口             |



###### 七，管理交换机管理地址

| 命令                                 | 描述                          |
| ------------------------------------ | ----------------------------- |
| interface vlan 1                     | 打开交换机的管理VLAN          |
| ip address 192.168.1.1 255.255.255.0 | 配置管理地址为 192.168.1.1/24 |
| no shutdown                          | 开启交换机                    |



###### 八，管理交换机配置信息

| 命令                    | 描述                                  |
| ----------------------- | ------------------------------------- |
| copy running-config     | 将当前运行的参数保存到启动文件中      |
| write                   | 将当前信息保存到flash中用于系统初始化 |
| delete flash:config.txt | 永久删除flash中的配置文件             |



## 贰-特权设置



###### 一，为交换机控制台设置密码

| 命令                  | 描述                |
| --------------------- | ------------------- |
| enable secret pass1   | 设置加密密码pass1   |
| enable password pass2 | 设置明文密码为pass2 |



###### 二，设置控制台密码

| 命令               | 描述               |
| ------------------ | ------------------ |
| configure terminal | 进入控制台         |
| line console 0     | 进入控制台状态     |
| password pass      | 设置登入口令为pass |
| login              | 允许登入           |
| end                | 切换到特权模式     |
| write              | 保存配置文件       |



###### 三，设置Telnet密码

| 命令               | 描述               |
| ------------------ | ------------------ |
| configure terminal | 进入Telnet         |
| line vty 0 4       | 进入虚拟配置       |
| password pass      | 设置登入口令为pass |
| login              | 允许登入           |
|                    |                    |



[2] 设置交换机管理 vlan 的IP地址

| 命令                                    | 描述                    |
| --------------------------------------- | ----------------------- |
| interface vlan 1                        | 进入交换机VLAN 1 虚拟口 |
| ip  address 192.168.1.234 255.255.255.0 | 给VLAN设置IP地址        |
| no shutdown                             | 开启WLAN1               |





## 叁-划分VLAN



###### 一，地址类别与子网掩码

| 类型 | 范围    | 子网          |
| ---- | ------- | ------------- |
| A    | 1-128   | 255.0.0.0     |
| B    | 128-191 | 255.255.0.0   |
| C    | 191-223 | 255.255.255.0 |



###### 二，划分VLAN

| 部门   | 网络地址      | 广播地址       | 可分配IP范围      |
| ------ | ------------- | -------------- | ----------------- |
| 信息部 | 192.168.10.0  | 192.168.10.63  | 192.168.10.1~62   |
| 社服部 | 192.168.10.64 | 192.168.10.127 | 192.168.10.65~126 |



###### 三，交换机VLAN和计算机的IP地址

| 设备名称 | VLAN或接口       | IP             | 子网掩码        |
| -------- | ---------------- | -------------- | --------------- |
| Switch1  | VLAN10(f0/1-10)  | 192.168.10.62  | 255.255.255.192 |
|          | VLAN20(f0/11-20) | 192.168.10.126 | 255.255.255.192 |



```
enable
进入特权模式

configure terminal
进入全局配置模式

hostname Switch1
设置交换机名称为 Switch1

vlan 10 
创建VLAN 10

name xinxibu
命名VLAN10为信息部拼音形式

exit
返回上一级

interface vlan 10
进入VLAN 10 接口

ip address 192.168.10.62 255.255.255.192 
配置IP及子网

no shutdown
开启接口
```



###### 四，实现同一网段进行通信

| 计算机 | IP地址       | 子网          | 交换机 | 接口  | VLAN   |
| ------ | ------------ | ------------- | ------ | ----- | ------ |
| PC1    | 192.168.10.1 | 255.255.255.0 | S1     | F0/1  | VLAN10 |
| PC2    | 192.168.20.1 | 255.255.255.0 | S2     | F0/11 | VLAN20 |

​	

​	配置S1交换机

```
enable
进入特权模式

configure terminal
进入全局配置模式

hostname s1
设置交换机名称为si

# -------------------------------------------------------------------------------+
# VLAN10 /
# -------------------------------------------------------------------------------+

vlan 10
创建 VLAN10

exit
返回上一级


#--------------------------------------------------------------------------------+
# VLAN20 /
# -------------------------------------------------------------------------------+

vlan 20
创建VLAN20

exit
返回上一级

# -------------------------------------------------------------------------------+
# 接口配置 F0/1 /
# -------------------------------------------------------------------------------+

interface f0/1
进入接口配置模式

switchport access vlan 10 
将F0/1划分到VLAN10

exit 
退出

# -------------------------------------------------------------------------------+
# 接口配置 F0/11 /
# -------------------------------------------------------------------------------+

interface f0/11
进入接口配置模式

switchport assess vlan 20
将F0/11划入VLAN 20
```



​	配置S2交换机

```
enable
进入特权模式

configure terminal
进入全局配置模式

hostname s2
设置交换机名称为S2

# -------------------------------------------------------------------------------+
# 创建接口 10/20 /
# -------------------------------------------------------------------------------+

vlan 10
创建VLAN10接口

eixt
返回上一级

vlan 20
创建VLAN20接口

exit
返回上一级

# -------------------------------------------------------------------------------+
# 划分接口 /
# -------------------------------------------------------------------------------+

interface f0/1
进入接口

switch access vlan 10
将f0/1划分给VLAN10

exit
返回上一级




interface f0/11
进入接口

switchport access vlan 20
将f0/11划分到VLAN2
```



```
# -------------------------------------------------------------------------------+
# 配置S1/S2交换机连接为Trunk模式（将端口设置为Trunk模式） /
# -------------------------------------------------------------------------------+
# S1
enable
进入特权模式

configrue terminal
进入全局配置模式

interface f0/24
进入 f0/24接口

switch mode trunk 
配置端口为Trunk模式

# ---
# S2
# ---

enable 
进入特权模式

configrue terminal
进入全局模式

interface f0/24
进入F0/24接口

switch mode trunk
设置端口为Trunk模式
```



## 	肆-端口安全



```
enable
进入特权模式

configure terminal
进入全局配置模式

interface f0/24
进入接口

swichport mode asscan 
设置交换机端口模式为Access

switchport port-security
开启端口安全

switchport port-security maximum 2
设置接口上安全地址的最大数为2,默认值为128

switchport port-security vioation shutdown
处理违例的方式为shutdown，默认protect
```



## 伍-生成树



生成树协议（STP，SpanningTree Protocol）主要可以让一个已知网桥在网络拓扑中避免环路，也可以在网络托盘发生变化时，通过生成树协议达到收敛的目的



```	
confirue terminal
进入特权模式

apanning-tree
开启生成树协议

# -------------------------------------------------------------------------------+
# 开启生成树协议 / 
# -------------------------------------------------------------------------------+

spanning-tree mode rstp
指定生成树协议为RSTP

shop spanning-tree
查看生成树协议是否开启


# -------------------------------------------------------------------------------+
# 设置交换机优先级 /
# -------------------------------------------------------------------------------+

spanning-tree priority 4096
设置交换机优先级为4096

# -------------------------------------------------------------------------------+
# 查看生成树信息 /
# -------------------------------------------------------------------------------+

spanning-tree
查看生成树信息
```





